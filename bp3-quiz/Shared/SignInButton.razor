@using bp3_quiz.Pages
@inject IJSRuntime JS

@message
<button @onclick="InteropCall" style="display:@display" class="btn btn-primary">Sign in with Google</button>

@code {
    private string message = "";
    private string display = "inline-block";
    private MessageUpdateInvokeHelper? messageUpdateInvokeHelper;

    protected override void OnInitialized()
    {
        messageUpdateInvokeHelper = new MessageUpdateInvokeHelper(UpdateMessage);
    }

    protected async Task InteropCall()
    {
        if (messageUpdateInvokeHelper is not null)
        {
            await JS.InvokeVoidAsync("updateMessageCaller",
                DotNetObjectReference.Create(messageUpdateInvokeHelper));
        }
    }

    private void UpdateMessage()
    {
        message = "Signed in!";
        display = "none";
        StateHasChanged();
    }

}